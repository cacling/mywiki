<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../web/css/common.css" type="text/css" charset="utf-8" />
<title>并行计算机介绍</title>
</head>
<body>
<div id="container">

<div class="seg"><h2><a name="1.1">处理器的发展</a></h2>
<h3>处理器发展的三个里程碑</h3>
<h3>超标量技术(SuperScalar)</h3>
1993年Intel Pentium超标量处理器<br>
能够在单个时钟周期内执行多条指令的处理器。<br>
采用指令级并行技术（Instruction-Level Parallelism）<br>
指令级并行技术:即动态执行或乱序（out of order）执行技术，使得CPU能够以更加优化的方式对指令进行重新定序），从而达到消除流水线停顿，进而保持处理器的执行单元尽量处于工作状态。<br>
<br>
超标量（superscalar）CPU架构，使用单颗核心来实现一种被称为指令集并行（instruction-level parallelism）的并行运算形式，它能够在相同的时钟频率下增加CPU的吞吐量。超标量处理器，通过同时分派多条指令给处理器上的冗余功能单元，可以在一个时钟周期内执行一条以上的指令。每个功能单元（functional unit）不是单独的CPU核，而是在单个CPU内的一个执行资源，例如一个ALU（Arithmetic Logic Unit，算术逻辑单元）、一个位移器（bit shifter）或一个乘法器（multiplier）。<br>
在典型情况下，超标量CPU同时也是流水线的，它们是两种不同的性能增强技术。非流水线的超标量CPU或流水线的非超标量CPU在理论上是可能的。<br>
流水线（pipeline，管道/管线），是一个串连在一起的数据处理元素的集合，其中的一个元素的输出是下一个元素的输入。流水线中的元素常常以并行或时间片方式执行，在这种情况下，在元素之间常常插入一些数量的缓冲存储器。<br>
指令流水线（instruction pipelines）是与计算机相关的流水线（其他流水线有图形流水线和软件流水线等）中的一种，它被用于处理器中，允许在同一时钟周期（circuitry）内重叠执行多个指令。时钟周期通常分割成阶段，包括指令解码、算术和寄存器读取阶段，其中每个阶段每次处理一条指令<br>

<h3>超线程技术(HT)</h3>
2000年 超线程技术(Hyper-Threading Technology)<br>
支持超线程技术的处理器首次采用同时多线程技术<br>
即：SMT技术（Simultaneous Multi-Threading）<br>
Intel实现的SMT技术就是超线程技术。<br>

Intel公司的超线程技术将一个物理处理器核模拟成两个逻辑核，可并行执行两个线程从而能有效提高处理器的运行效率。
一直以来，处理器芯片厂商都是通过不断提高主频来提高处理器的性能（例如Intel于 2004年12月12日推出的Pentium 4 HT 570J处理器的主频就达到了3.8GHz）。但是随着芯片制程工艺的不断进步，单个芯片上集成的晶体管数已超过数亿，传统处理器体系结构技术面临瓶颈，很难单纯通过提高主频来提升性能。而且在主频的提高同时，带来功耗的迅速提高以及散热等问题非常严重，这些也是直接促使单核转向多核的深层次原因。从应用需求来看，日益复杂的多媒体、科学计算、虚拟化等多个应用领域都呼唤更为强大的计算能力。在这样的背景下，各主流处理器厂商将产品战略从提高芯片的时钟频率转向多线程和多内核方面。
总之，不能永远靠加快频率的方法来改善性能。频率高到一定程度以后，必然要转向多核技术。这是由芯片的先天性质决定的。<br>


<h3>多核处理器(MultiCore)</h3>
一直以来，处理器芯片厂商都是通过不断提高主频来提高处理器的性能，但是随着芯片制程工艺的不断进步，单个芯片上集成的晶体管数已超过数亿，在主频的提高同时，带来功耗的迅速提高以及散热等问题非常严重。<br>
Intel的奔腾4最高主频达到3.8G，但发热也尤其明显。CPU因为散热问题未能解决成为开发更高主频的瓶颈，Intel不得不承认奔腾系列已经遇到主频极限<br>
从1994到1998年间，CPU时钟频率增长了300％，而从2007年到2012年，CPU时钟频率从2.93GHz升至3.9GHz只增长了33％<br>
在多个应用领域都不断呼唤更为强大的计算能力，而传统处理器体系结构技术遇到瓶颈，受到工艺、材质、发热量等因素的限制，CPU的频率不可能无止境提升。处理器芯片厂商不得不另辟蹊径寻找另外的方法来继续他们CPU的神话。<br>
工程师们想到了一个办法，就是在一个CPU里集成两个内核。在2005年Intel和AMD相继推出了采用双核心的CPU，计算机从此拉开多核时代的序幕。<br>
<br>
从双核开始至今，处理器芯片厂商都主要通过不断改进技术增加核数来提升处理器的性能
<br>
2005年 多核处理器（双核处理器）<br>
采用单芯片多处理器（CMP，Chip Multiprocessor）设计<br>
在单个处理器芯片内实现两个或更多的“逻辑核”。这些核都是相互独立的处理器，只是位于同一块芯片上而已。<br>
执行核有自己的体系结构资源，并且可以与SMT技术结合<br>
双核的CPU,在物理上(也就是实体物质上),有两个核心,就叫做物理双核。逻辑双核，就是在物理上只有一个核心，采用技术手段，使它模拟双核工作，就像一个人，完成两个人的工作任务。一个人一只手在炒菜，另一只手在洗碗.这就是两条工作线同时都在前进。用在CPU上，就是“双线程”了，也就是逻辑双核。如果炒菜和洗碗，由两个人来干，就是“物理双核”了。 逻辑双核技术,就是HT技术(超线程技术)，很显然物理双核心处理器性能要更优越。
Intel公司的超线程技术将一个物理处理器核模拟成两个逻辑核，可并行执行两个线程从而能有效提高处理器的运行效率。<br>
</div>


<div class="seg"><h2><a name="1.2">并行计算机分类</a></h2>
- 根据存储结构对并行计算机进行了分类。<br>
- 并行计算平台会影响用于表示系统并发性的自然编程模型。<br>
  共享存储器机器的编程环境可能为程序员提供分布式存储器和消息传递的抽象(如：Erlang语言的并发机制)。<br>
  而分布式存储器系统也可提供分布式存储器机器的共享存储器抽象。<br>
<br>
并行计算机按存储结构分为：<br>
－紧耦合的共享存储结构(Shared Memory)<br>
－松耦合的分布式存储结构(Distributed Memory)<br>
－混合的分布式共享存储结构(Distributed Shared Memory)<br>

<h3>共享存储(Shared Memory,SM)</h3>
使用共享存储结构(Shared Memory,SM)的计算机，通常也称作紧密耦合多处理机。<br>
它具有多个处理器及一个可以全局一致访问的物理存储。系统对程序员而言是全局统一编址的，所有的进程共享一个地址空间，并通过读写共享变量来相互通信。<br>
共享存储的优点是<br>
由于支持传统的单地址编程空间,多个程序间可通过全局物理内存进行数据交换，程序设计比较简单，减轻了程序员的编程负担。因此共享存储系统具有较强的通用性,且可以方便地移植现有的应用软件<br>
但其缺点是<br>
由于共享访问介质,共享必然会引起冲突,使得在访问共享存储时需要考虑是否会产生冲突避免数据争用，需要一些类似操作系统的机制保证对共享数据的访问是安全的(如加锁，信号量等)，从而使共享存储器成为系统瓶颈。<br>
编程的方法:<br>
并行编程如OpenMP，也可用消息传递(PVM/MPI)及HPF<br>
<h4>均匀存储器存取(UMA)</h4>
SMP中最常见的访存模型是均匀存储器存取(Uniform Memory Access, UMA)。<br>
－ 存储器被所有节点均匀共享。<br>
－ 发所有节点访问任意存储单元的时间相同。<br>
－ 当发生访存竞争时，仲裁策略平等对待每个节点，即每个节点机会均等。<br>
－ 外围I／O设备也可以共享，且每个节点有平等的访问权利。<br>
SMP竞争共享存储器时，因相互冲突而延迟，从而使各处理器访问主存的平均时间增加。如果一个存储块上连接的处理器不多，则引起冲突的概率当然就小。但我们又不愿意通过减少处理器数目来缩短访问主存的平均时间。这是一个两难问题。<br>
一种解决办法是，在处理器和开关之间增加高速缓冲存储器(Cache)。把刚访问过的共享存储器的内容保留在Cache中，当处理器再度访问主存时，先查询Cache，如果要访问的数据已在Cache中，则不必访问主存。这样可以减少访问主存的次数但必须配置Cache置换算法并承担置换时间开销。<br>


<br>
<h4>共享存储多处理机(SMP)</h4>
共享存储多处理机(Shared Memory MulptiProcessors，SMP)是使用享存储方式最典型的体系结构，也称为对称型多处理机(Symmetrical MultiProcessors，SMP)。<br>
SMP上汇集了多个处理器,所有的处理器都可以平等地访问内存、I/O和外部中断,所有的处理器通过总线连接共享存储器并以相同速度访问所有存储器单元。<br>
SMP系统中，系统资源被系统中所有处理器共享，工作负载能够均匀地分配到所有可用处理器之上。<br>
SMP优点是简单，维护方便<br>
SMP缺点是可伸缩性有限，所有处理器通过一条公共主线访问主存，主线有限的带宽限制了系统的规模。SMP处理器数目一般最多可达到32个。
而且构建一套SMP系统需要的必要条件是：支持SMP的硬件包括主板和CPU；支持SMP的系统平台，再就是支持SMP的应用软件。
<br>
代表机型：SGI PowerChanlenge;SUN E10000等<br>
常见的支持SMP处理器有：Intel的Xeon，Pentium D, Core Duo 和 Core 2 Duo， AMD的athlon64 X2, Quad FX or Opteron 200 &nbsp; 2000 系列<br>
<br>


<h3>分布式存储(Distributed Memory, DM)</h3>
使用分布式存储结构(Distributed Memory, DM)的计算机群，通常也叫做消息传递多处理机或多计算机。<br>
它由多个处理节点通过互连网络连接而成， 每个处理节点由一个处理器(或SMP)和本地存储模块组成。<br>
分布式存储系统中，每个进程具有它自己的地址空间，进程间通过消息传递(发送和接收消息)进行通讯。<br>
分布式存储的优点是具有较好的可扩展性,易构成较大规模。通过精心设计的网络拓补结构，系统往往可以比一个SMP的系统包含更多数量级的处理器。每个计算节点有自己独立的存储，不存在数据共享冲突问题。可以通过网络连接大量廉价的计算机来降低硬件成本。<br>
分布式存储的缺点是数据不能共享需要拷贝，并发执行的所有通讯都必须在网络上使用消息传递,即通过显式的收发原语来完成。<br>
由于程序设计者需要自己负责考虑数据分配和消息通信，因而较共享存储系统上的程序设计要困难一些，比如不同地址空间的进程迁移使问题，又如当分发一个任务给多个计算节点(每个节点有自己独立的存储)，如何汇集最终计算结果。<br>
编程的方法:<br>
并行编程语言，消息传递库。<br>
<br>
<br>
分布式存储结构的计算机群分为几类：大规模并行处理机(MPP),集群(Cluster),网格(Grid)
<h4>大规模并行处理机(MPP)</h4>
大规模并行处理机(Massively Parallel Processors，MPP)是门用于大型并行计算的并行处理系统,由大量具有局部内存的计算节点通过高速系统网络连接而成。<br>
MPP系统的网络通常具有某种拓扑结构(Tree,Mesh,Torus,Hypercuber)。MPP系统具有非凡的可伸缩性，在某些示例中，一个系统具有数千个处理器。<br>
<h4>集群(Cluster)</h4>
集群(Cluster)是由商业计算机通过商业网络连接而成的分布式存储器系统<br>
集群为一个组织获得并行计算能力提供了一种廉价的方式。现在可以从很多供货商处获得预配置的集群。一个节俭的团体甚至可以通过使用集群组合过时的PC的能力来构建一个有用的并行系统。<br>
集群计算主要关注的是计算资源;<br>
集群通常包含同种处理器和操作系统;<br>
集群包含的处理器和资源的数量通常都是静态的;<br>
集群物理上都包含在一个位置的相同地方，集群互连技术可以产生非常低的网络延时
<h4>网格(Grid)</h4>
网格(Grid)一种用于集成或共享地理上分布的各种资源(包括计算机系统、存储系统、通信系统、文件、数据库、程序等)，使之成为有机的整体，共同完成各种所需任务的机制。<br>
网格计算是对存储、网络和计算资源进行了集成。<br>
网格是由异构资源组成的，可以包含不同供应商提供的运行不同操作系统的机器。如IBM、Platform Computing、DataSynapse 和 United Devices 提供的网格工作负载管理软件都可以将工作负载分发到类型和配置不同的多种机器上。
网格本质上就是动态的。而在网格上，资源则可以动态出现。资源可以根据需要添加到网格中，或从网格中删除。<br>
网格天生就是在本地网、城域网或广域网上进行分布的。<br>
网格提供了增强的可扩展性。例如，IBM、United Devices 和多个生命科学合作者完成了一个设计用来研究治疗天花的药品的网格项目。这个网格包括大约两百万台个人计算机。<br>
集群和网格计算是相互补充的。很多网格都在自己管理的资源中采用了集群。<br>


<h3>分布式共享存储(Distributed Shared Memory,DSM)</h3>
分布式共享存储(Distributed Shared Memory,DSM)是存储物理上分布逻辑上共享，由SMP构成的计算机群<br>
DSM没有物理上共享的存储器，DSM操作系统通过将所有SMP的存储器集合组成了全局共享虚拟存储器，提供了一个可供系统内所有节点所共享的虚拟地址空间。<br>
进程访问DSM系统的虚拟地址空间的数据就像访问传统的虚拟存储器一样，每一个节点都可以拥有存储在全局地址空间的数据。<br>
当一个进程访问共享地址空间中的数据时，映像管理员就把共享存储器地址变换到本地地址或远程的物理存储器地址。<br>

<h4>微机机群(PC cluster),工作站机群(NOW)</h4>
微机机群(PC cluster,又称Beowulf Cluster),工作站机群(NOW, Network of Workstations):将联网的多台微机/工作站通过组织DSM系统成并行机。<br>
适用于中等规模的并行系统(数百个处理器)。价格便宜、配置灵活，但规模及并行效率收网络设备的制约，配以适当的系统工具可以达到MPP的使用效果<br>
代表机型：SGI Origina 2000/3000<br>
<br>
<h4>非均匀存储器存取(NUMA)</h4>
非均匀存储器存取(Nouniform Memory Access, NUMA)是DMS中最常见的存储方式。<br>
－ 存储器被所有节点均匀共享。<br>
- 节点访问内存模块的速度不同，访问本地存储模块的速度一般是访问其他节点内存模块的几倍。<br>
－ 发生访存竞争时，仲裁策略对节点可能是不等价的。<br>
－ 外围I／O设备也可以共享，但对节点是不等价的。<br>
DSM中的NUMA虚拟储存器是共享的，但是每个SMP节点访问存储的时间并不相同，SMP处理机访问本地存储器时比较快，但访问另一台SMP的存储器的速度较慢。<br>

<h4>DSM操作系统</h4>
Ivy, Midway, Munin, ThreaadMarks, JIAJIA<br>

</div>


</div>
</body>
</html>