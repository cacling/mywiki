<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../web/css/common.css" type="text/css" charset="utf-8" />
<title>多核处理器产生的原因</title>
</head>
<body>
<div id="container">

<h2>Moore's Law</h2>
<div class="seg">
Intel创始人之一Gordon Moore于1965年提出来摩尔定律（Moore's Law）：当价格不变时，集成电路上可容纳的晶体管数目，约每隔18个月便会增加一倍，性能也将提升一倍。换言之，每一美元所能买到的电脑性能，将每隔18个月翻两倍以上。<br>
<br>
在CPU快速发展的20年里，CPU一次次的突破性能极限，从奔腾到奔腾2突破1GHZ,从奔腾2到奔腾3突破3GHZ,从奔腾3到奔腾4主频终于高达3.8GHZ。
根据定律，随着CPU晶体管数目不断的增加，我们的软件运行的速度会越来越快。
<img width="550px" src="i/Moore'sLaw.jpeg">
</div>

<h2>现实问题</h2>
<div class="seg">

然而随着核数的增加，软件的运行速度并没有相应成倍的增长
<img alt="" src="i/RealWorldMuliticoreScaling.jpeg" width="550px">
<br><br>
G.M.Amdahl在1967年提出了Amdahl’s law，针对并行处理的给出了一个模型，指出使用并行处理的提速由问题的可并行的部分所决定。<br>
<img alt="" src="i/Amdahl'slawFomula.jpeg" width="600px"><br>
speedup=1/（串行部分比例+（1-串行部分比例）/核的数量） <br>
S为问题中可被并行处理的部分的比例,n为并行处理器的数量，Speedup为并行后相比串行时的提速。例如：<br>
<img alt="" src="i/Amdahl'slawExample.jpeg" width="700px"><br>
<img alt="" src="i/Amdahl'slaw.jpeg"><br>
按照Amdahl定律，，在10个CPU环境下即使我们把可并行处理部分提高到90％得到5倍左右的加速。如果核的数目为无限大，那么加速比的理论上限值为1/串行部分比例。<br>
1988年sandia national lab的Gustafson等人，在用1024个处理器的超立方体结构上做实验时，发现加速比随着处理器的数量呈现行增长。<br>
他们用计算加速比的定义简单推导：<br>
<img alt="" src="i/Gustafson'sLawFomula.jpeg" width="300px"><br>
speedup = (s+p*n)/(s+p) = s+p*n = n+(1-n)*s.<br> 
这就是著名的Gustafson公式，其中s为串行部分比例，n为核的数目。<br>
<br> 
这两个定律对于加速比的计算为什么会产生如此截然不同的结论呢？实际上，Amdahl定律有三个潜在前提：<br> 
1）最有算法的性能严格受限于CPU资源的可用性。<br> 
2）串行算法是给定问题的最优解决方案。<br> 
3）处理核增长的时候，问题的规模不变。<br> 
任何违背这三个假设的实例都可以打破Amdahl定律，也就是说，Amdahl定律对违背这三个假设的问题来说，是谬误的。Gustafson等人做的那三个实验属于大规模并行处理，违背了第三个假设。违背第一个假设和第二个假设的实例也很多。<br>
<br> 
比较这两个定律<br> 
Amdahl定律: 假设两个城市之间的距离是60km，一辆车花了一个小时走了头30km。无论在以后的30km里它开多快，都没有办法达到90km/h。因为你已经用了一个小时，而你的距离只有60km，所以最多也就是60km/h<br> 
Gustafson 定律：假设一辆车以低于90km/h的速度行驶，那只要给足够长的路它走，那平均下来有肯能达到90km/h或者更高<br> 
<br> 
实际上，Amdahl定律和Gustafson定律是等价的，但等价的前提是，要重新计算公式中的s。在Amdahl定律中，认为s是独立于n 的变量，而实际上在大规模并行处理问题中，s是依赖于n的变量。在这里，假定Amdahl定律中的s为s1,而Gustafson 定律中的s为s2.那么s1与s2实际上可以很简单地推出如下关系：s1=1/(1+(1-s2)*p/s2).将这个式子带入Amdahl定律，就是Gustafson定律的公式了。Gustafson当时并没有意识到这点，他只是按照他的实验推导出了他的公式。<br>
 
Amdahl定律的价值：
1. 无限的处理器核并不能带来性能上的无限增长，即应用程序从可并行部分所获得的性能提升最大值受限于串行部分所占的比例。
2. 对于加速程序性能而言，减少程序中串行部分所占的比例，增加并行部分比例的方法将比增加处理器核的数量的方法更有实际意义。
3. 只有当程序的大部分都是可并行代码的时候，增加处理器核的数量才会比增加并行代码的比例更加有效。 
 
</div>


<h2>CPU发展的历史</h2>
<div class="seg">
<img alt="" src="i/CPUHistory.jpeg">
IBM于2001年10月发布了世界上首款多核处理器——双核RISC处理器Power 4，它将两个64位的Power PC处理器集成在一颗芯片上。Power 4采用180纳米技术，主频为1.1和1.3 GHz，两核心共享1.41 MB二级高速缓存（L2 cache）。
HP于2004年2月也发布了其首款（64位RISC）双核处理器PA-RISC8800，采用130纳米技术，主频为0.8和1GHz，两核心共享32 MB L2 cache。
Sun于2004年3月发布了其首款（64位RISC）双核处理器UltraSPARC Ⅳ，也采用130纳米技术，主频为1.05和1.2GHz，两核心共享16 MB L2 cache，支持超线程。2005年11月14日Sun发布了代号为Niagara（尼亚加拉瀑布）低能耗的8核32线程的UltraSPARC T1处理器，采用90纳米技术，主频为1.2GHz。
Intel于2005年4月18日（5月25日）发布（推出）了世界上首款基于x86架构的（64位CISC）双核处理器——Pentium D（奔腾D）820、830和840，主频分别为2.8、3.0和3.2 GHz。它将两颗Pentium 4 Prescott核心放在同一块芯片上（胶水CPU），采用90纳米技术，两核各自拥有独立的1 MB L2 cache。最初的Pentium D型号不支持超线程，后来推出的EE（Extreme Edition，极致版）系列和Presler型号才支持超线程技术。
AMD于2005年4月21日也发布了其首（64位CISC）多核处理器——双核版的Opteron（皓龙）200和800系列，采用90纳米技术，主频为1.4到2.2GHz，两核各自拥有独立的512 KB ~ 1 MB L2 cache。AMD的Opteron处理器，是针对服务器的高档CPU。
2006年1月5日Intel推出用于笔记本的Core Duo（酷睿双核）（32位CISC）处理器T2300~T2600和L2300~T2500，主频分别为1.666~2.166 GHz和1.5~1.833 GHz，共享2 MB L2 cache。Core Duo是Intel 首次采用65纳米技术的处理器，也是全球首款低能耗的双核处理器。。
2006年7月23日Intel推出用于服务器的代号为Conroe XE 的Core 2 Extreme（酷睿2 极致）（64位CISC）处理器X6800，也采用65纳米技术，主频为2.933 GHz，共享4 MB L2 cache。
2006年7月27日Intel发布Core 2 Duo（酷睿2 双核）（64位CISC）处理器，采用65纳米技术，包括代号为Allendale 的E6300和E6400，主频分别为1.866和2.133 GHz，共享2 MB L2 cache；和代号为Conroe的E6600和E6700，主频分别为2.4和2.666 GHz，共享4 MB L2 cache。
2007年1月7日Intel发布了Core 2 Quad（酷睿2 四核）（64位CISC）处理器Q6600，也采用65纳米技术，它将两颗Core 2 Duo Conroe核心放在同一块芯片上（胶水CPU），主频为2.4 GHz，两核各自拥有独立的4 MB L2 cache。
2007年11月19日AMD推出其代号为Agena的首款（64位CISC）四核（64位CISC）处理器Phenom（羿龙）X4 9500和9600，采用65纳米技术，主频分别为2.2和2.3 GHz，四个核各自拥有独立的512 KB L2 cache，共享2 MB L3 cache。与Intel的胶水四核CPU Core 2 Quad不同，AMD的Agena为首款真正四核的x86处理器。
2008年3月27日AMD推出代号为Toliman的三核处理器AMD Phenom X3 8400和8600，采用65纳米技术，主频分别为2.1和2.3 GHz，三个核各自拥有独立的512 KB L2 cache，共享2 MB L3 cache。Toliman是屏蔽掉AMD四核处理器Agena的一个核心后的产物（废品再用）。
2008年9月15日Intel推出了代号为Dunnington的基于Intel Core微架构的64位6核至强（Six-Core Xeon）处理器L7455、X7460和E7450，采用45纳米技术，主频分别为2.133、2.4和2.667 GHz，3组双核每组各自拥有独立的3MB L2 cache，共享12或16 MB L3 cache。
2008年11月17日Intel推出了面向高端应用的代号为Bloomfield的64位四核处理器Core i7（酷睿 i7）920和965 Extreme Edition，基于Intel Nehalem微架构，采用45纳米技术，主频分别为2.66和3.20 GHz，四个核各自拥有独立的256 KB L2 cache，共享8 MB L3 cache，支持超线程技术。Intel计划于2010年推出代号为Gulftown的32纳米Core i7，将拥有六个核。
Intel计划于2009年9月推出代号为Lynnfield的2~4核的64位处理器Core i5，也基于Intel Nehalem微架构，可视为Core i7的简化版，面向主流应用。
Intel于2009年6月18日又宣布了Core i3处理器，也基于Intel Nehalem微架构，低能耗，面向笔记本和上网本等移动应用。
在2009年2月的ISSCC 2009国际固态电路会议上，Intel首次宣布了8核心服务器处理器“Nehalem-EX”。2009年6月1日，Intel则正式公布了该处理器的详细资料，并将于2009年6月26日向公众详细介绍Nehalem-EX。8核16线程Nehalem-EX基于45nm工艺Nehalem架构，支持QPI总线互联，集成双芯片、四通道内存控制器，三级缓存容量24MB，晶体管数量也达到了惊人的23亿个，热设计功耗130W，接口为新的LGA1567。该系列处理器预计将于今年年底或明年年初发布，针对多路服务器市场，替代Penryn微架构的六核“Dunnington”，成为Intel多路服务器领域的旗舰产品，目标甚至是成为RISC超级计算机的低成本替代者。
</div>



</div>
</body>
</html>